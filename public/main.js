var x=window.matchMedia("(min-width: 780px)");var p=Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}),E={ids:[],todos:{},selected:[]},A={root:document.getElementById("main"),todos:{},fragment:document.createDocumentFragment()},R={colors:[],status:"all",tags:[]},L={},j={templateButtonTag:document.getElementById("template_button-tag"),templateTodotag:document.getElementById("template_todo-tag")},B={add(y,Q,U){if(E.ids.push(y),E.todos[y]=Q,A.todos[y]=U,localStorage.setItem(`todo.${y}`,JSON.stringify(Q)),localStorage.setItem("todo.ids",JSON.stringify(E.ids)),Q.tags.length>0)C.add(Q.tags);if(R.status!=="completed"){if(R.colors.length>0&&!w.includeColor(Q.color))return;if(R.tags.length>0&&(Q.tags.length===0||!w.includeTags(Q.tags)))return;E.selected.push(y),U.setAttribute("data-display","1")}A.root?.appendChild(U)},editTags(y,Q,U){if(Q.length===0&&U.length===0)return!1;else if(U.length===0)return C.remove(Q),Q.length=0,y.setAttribute("data-display","0"),y.replaceChildren(),!0;else if(Q.length===0){C.add(U);for(let K=0;K<U.length;K+=1){let P=U[K],V=C.createDOMTodoTag(P);A.fragment.appendChild(V),Q.push(P)}return Element.prototype.replaceChildren.apply(y,A.fragment.children),y.setAttribute("data-display","1"),!0}let q=Q.length<U.length?Q.length:U.length,z=y.children,G=0;while(G<q&&Q[G]===U[G])A.fragment.appendChild(z[0]),G+=1;let J=!1;if(!(G===q&&Q.length===U.length)){C.add(U,G),C.remove(Q,G);let K;for(let P=G;P<U.length;P+=1){let V=U[P];if(P<Q.length)K=z[0],C.editDOMTodoTag(K,V);else K=C.createDOMTodoTag(V);A.fragment.appendChild(K),Q[P]=V}if(U.length<Q.length)Q.length=U.length;J=!0}return Element.prototype.replaceChildren.apply(y,A.fragment.children),y.setAttribute("data-display","1"),J},edit(y,Q,U,q,z){const G=E.todos[y];if(G===void 0)return;const J=A.todos[y];let K=!1;if(Q){K=!0;const P=Date.now();G.date=P,J.header.firstElementChild.textContent=p.format(P);let V=E.ids.indexOf(y),X=E.ids.length;if(V===-1){console.error("TodosMethods.edit: There is no id in ids.","Something is break");return}if(E.ids.copyWithin(V,V+1,X),E.ids[X-1]=y,V=E.selected.indexOf(y),V!==-1)X=E.selected.length,E.selected.copyWithin(V,V+1,X),E.selected[X-1]=y;A.root.appendChild(J)}if(U!==G.text)K=!0,G.text=U,J.main.firstElementChild.textContent=U;if(q!==G.color)K=!0,G.color=q,J.setAttribute("data-color",q);if(z!==void 0){const P=J.footer;let V=B.editTags(P,G.tags,z);if(V)K=V}if(K)localStorage.setItem(`todo.${y}`,JSON.stringify(G))},remove(y){const Q=E.ids,U=Q.indexOf(y);if(U===-1)return;if(U!==Q.length-1)Q.copyWithin(U,U+1,Q.length);Q.pop();const q=A.todos[y];C.remove(E.todos[y].tags),delete E.todos[y],delete A.todos[y],B.removeSelected(y),A.root.removeChild(q),localStorage.removeItem(`todo.${y}`),localStorage.setItem("todo.ids",JSON.stringify(E.ids))},removeSelected(y){const Q=E.selected;let U=Q.indexOf(y);if(U===-1)return!1;if(U!==Q.length-1)Q.copyWithin(U,U+1,Q.length);Q.pop();const q=A.todos[y];if(q!==void 0)q.setAttribute("data-display","0");return!0},toggleCompleted(y){const Q=E.todos[y];if(Q===void 0)return;Q.completed=!Q.completed,localStorage.setItem(`todo.${y}`,JSON.stringify(Q));const U=A.todos[y];if(U===void 0)throw Error("DOMTodo is undefined when it must not be");if(B.setDOMTodoComplete(U,Q.completed),Q.completed&&R.status==="active"||!Q.completed&&R.status==="completed")B.removeSelected(y)},setDOMTodoComplete(y,Q){if(Q)y.setAttribute("data-completed","1"),y.buttonToggle.title="mark as no completed";else y.setAttribute("data-completed","0"),y.buttonToggle.title="mark as completed"}},w={clearCompleted(){const y=E.ids;let Q=-1;for(let U=0;U<y.length;U+=1){let q=y[U];const z=E.todos[q];if(z.completed){const G=A.todos[q];if(C.remove(z.tags),delete E.todos[q],delete A.todos[q],A.root.removeChild(G),localStorage.removeItem(`todo.${q}`),Q===-1)Q=U}else if(Q!==-1)y[Q]=y[U],Q+=1}if(Q===-1)return;switch(y.length=Q,localStorage.setItem("todo.ids",JSON.stringify(y)),R.status){case"active":return;case"completed":{E.selected.length=0;return}default:{const U=E.selected;Q=-1;for(let q=0;q<U.length;q+=1){const z=U[q];if(E.todos[z]===void 0){if(Q===-1)Q=q}else if(Q!==-1)U[Q]=U[q],Q+=1}if(Q!==-1)U.length=Q}}},completeAll(){let y=!1;for(let Q=0;Q<E.ids.length;Q+=1){let U=E.ids[Q],q=E.todos[U];if(!q.completed){y=!0,q.completed=!0,localStorage.setItem(`todo.${U}`,JSON.stringify(q));let z=A.todos[U];if(R.status==="active")z.setAttribute("data-desplay","0");B.setDOMTodoComplete(z,!0)}}if(!y)return;switch(R.status){case"all":return;case"active":E.selected.length=0;break;default:w.selectTodos()}},changeColor(y,Q){if(R.colors.length>0){const U=R.colors.indexOf(y);if(Q){if(U!==-1)return;R.colors.push(y),w.selectTodos()}else{if(U===-1)return;if(R.colors[U]=R.colors[R.colors.length-1],R.colors.pop(),R.colors.length>0){let q=0;const z=E.selected;for(let G=0;G<z.length;G+=1){let J=z[G],K=E.todos[J];if(y!==K.color)z[q]=z[G],q+=1;else A.todos[J].setAttribute("data-display","0")}z.length=q}else w.selectTodos()}}else if(Q){const U=E.selected;let q=0;for(let z=0;z<U.length;z+=1){let G=U[z],J=E.todos[G];if(y===J.color)U[q]=G,q+=1;else A.todos[G].setAttribute("data-display","0")}U.length=q,R.colors.push(y)}},changeStatus(y){if(y===R.status)return;R.status=y,w.selectTodos()},includeColor(y){let Q;for(let U=0;U<R.colors.length;U+=1)if(Q=R.colors[U],y===Q)return!0;return!1},includeTags(y){let Q=y.length;if(Q<R.tags.length)return!1;let U="",q="";y:for(let z=0;z<R.tags.length;z+=1){q=R.tags[z];for(let G=0;G<Q;G+=1)if(U=y[G],U===q){y[G]=y[Q-1],y[Q-1]=U,Q-=1;continue y}return!1}return!0},selectTodos(){const{selected:y,ids:Q}=E;if(R.status==="all")for(let z=0;z<Q.length;z+=1)y[z]=Q[z];else{const z=R.status==="completed";let G=0;for(let J=0;J<Q.length;J+=1){let K=Q[J];if(E.todos[K].completed===z)y[G]=K,G+=1;else A.todos[K].setAttribute("data-display","0")}if(G<y.length)y.length=G}const U=R.colors;if(U.length>0){let z=0;for(let G=0;G<y.length;G+=1){let J=!0,K=y[G],P=E.todos[K];for(let V=0;V<U.length;V+=1)if(P.color===U[V]){y[z]=K,z+=1,J=!1;break}if(J)A.todos[K].setAttribute("data-display","0")}y.length=z}const q=R.tags;if(q.length>0){let z=0;while(z<q.length&&y.length>0){const G=q[z];let J=0;for(let K=0;K<y.length;K+=1){let P=!0;const V=y[K],X=E.todos[V].tags;for(let Y=0;Y<X.length;Y+=1)if(X[Y]===G){y[J]=V,J+=1,P=!1;break}if(P)A.todos[V].setAttribute("data-display","0")}y.length=J,z+=1}}for(let z=0;z<y.length;z+=1){let G=y[z];A.todos[G].setAttribute("data-display","1")}},addTag(y){if(R.tags.length===0||!R.tags.includes(y)){const Q=E.selected;let U=0;for(let q=0;q<Q.length;q+=1){let z=!0;const G=Q[q],J=A.todos[G],K=E.todos[G].tags;for(let P=0;P<K.length;P+=1)if(K[P]===y){Q[U]=G,U+=1,J.setAttribute("data-display","1"),z=!1;break}if(z)J.setAttribute("data-display","0")}return Q.length=U,R.tags.push(y),!0}return!1},removeTag(y){let Q=R.tags.indexOf(y);if(Q===-1)return!1;return R.tags.copyWithin(Q,Q+1,R.tags.length),R.tags.pop(),w.selectTodos(),!0}},C={createDOMButtonTag(y,Q){const U=j.templateButtonTag.content.cloneNode(!0).firstElementChild;return C.editDOMButtonTag(U,y,Q),U},editDOMButtonTag(y,Q,U){if(y.title=`tag: ${Q}`,U!==void 0)y.name=U;y.setAttribute("data-value",Q),y.firstElementChild.textContent=Q},createDOMTodoTag(y){const Q=j.templateTodotag.content.cloneNode(!0).firstElementChild;return Q.title=`tag: ${y}`,Q.firstElementChild.textContent=y,Q},editDOMTodoTag(y,Q){y.title=`tag: ${Q}`,y.firstElementChild.textContent=Q},add(y,Q){if(Q===void 0)Q=0;let U="";while(Q<y.length){if(U=y[Q],L[U]!==void 0)L[U]+=1;else L[U]=1;Q+=1}},remove(y,Q){if(Q===void 0)Q=0;let U="";while(Q<y.length){if(U=y[Q],L[U]!==void 0){if(L[U]-=1,L[U]===0)delete L[U]}Q+=1}}};var F={CREATE:"create",CREATE_TITLE:"New Todo",EDIT:"edit",EDIT_TITLE:"Edit Todo",editId:""},I={input:"",selected:[],charSuggested:"",suggested:[],tempSuggested:[]},m="modal_todo",v={root:document.getElementById(m),title:document.getElementById("modal_todo-title"),text:document.getElementById(m).text,sectionDate:document.getElementById("modal_todo-section-date"),changeDate:document.getElementById(m).change_date,color:document.getElementById(m).color,tagsInput:document.getElementById(m).tags_input,tagsAdd:document.getElementById(m).tags_add,tagsSuggested:document.getElementById(m).tags_suggested,sectionSelected:document.getElementById("modal_todo-section-selected"),tagsSelected:document.getElementById(m).tags_selected,buttonComplete:document.getElementById(m).button_complete,fragment:document.createDocumentFragment()},n={createDOMTagSelected(y){const Q=C.createDOMButtonTag(y,`tagse_${y}`);return Q.onclick=n.removeTag,Q},createDOMTagSuggested(y){const Q=C.createDOMButtonTag(y,`tagsu_${y}`);return Q.onpointerdown=n.addSuggestedTag,Q},closeTodoModal(){v.root.setAttribute("data-display","0"),document.body.style.overflow=""},initTagsEdit(y){if(y.length>0){const Q=I.selected,U=v.tagsSelected.children,q=Q.length;for(let z=0;z<y.length;z+=1){let G=y[z];if(G!==Q[z]){if(z<q){const J=U[0];C.editDOMButtonTag(J,G),v.fragment.appendChild(J)}else{const J=n.createDOMTagSelected(G);v.fragment.appendChild(J)}Q[z]=G}else v.fragment.appendChild(U[0])}if(y.length<Q.length)Q.length=y.length;v.sectionSelected.setAttribute("data-display","1"),Element.prototype.replaceChildren.apply(v.tagsSelected,v.fragment.children)}else I.selected.length=0,v.sectionSelected.setAttribute("data-display","0"),v.tagsSelected.replaceChildren()},openTodoModal(){v.tagsSuggested.setAttribute("data-show","0"),v.tagsInput.value="",v.root.setAttribute("data-display","1"),document.body.style.overflow="hidden",v.text.focus()},removeTag(y){const Q=y.currentTarget.getAttribute("data-value");if(y.currentTarget.remove(),Q===null)return;const U=I.selected;let q=U.indexOf(Q);if(q!==-1)U.copyWithin(q,q+1,U.length),U.pop();if(U.length===0)v.sectionSelected.setAttribute("data-display","0")},resetTagsSelected(){I.selected.length=0,v.tagsSelected.replaceChildren()},addTag(y){const Q=I.selected;if(Q.length===0){const U=n.createDOMTagSelected(y);v.tagsSelected.appendChild(U),Q.push(y),v.sectionSelected.setAttribute("data-display","1")}else if(!Q.includes(y)){const U=n.createDOMTagSelected(y);v.tagsSelected.appendChild(U),Q.push(y)}I.input="",v.tagsInput.value="",v.tagsSuggested.setAttribute("data-show","0")},addInputTag(){const y=I.input;if(y.length===0)return;n.addTag(y)},addSuggestedTag(y){const Q=y.currentTarget.getAttribute("data-value");n.addTag(Q)},createSuggested(y){const Q=I.suggested;if(y.length===0){v.tagsSuggested.setAttribute("data-show","0");return}else if(y.length===1){const U=v.tagsSuggested.children,q=I.tempSuggested;if(y===I.charSuggested)for(let z=0;z<q.length;z+=1)Q[z]=q[z],U[z].setAttribute("data-display","1");else{I.charSuggested=y;let z=0,G=Q.length;for(let J in L)if(y===J[0]){let K;if(z<G)K=U[0],C.editDOMButtonTag(K,J,`tagsu_${J}`),K.setAttribute("data-display","1");else K=n.createDOMTagSuggested(J);v.fragment.appendChild(K),Q[z]=J,q[z]=J,z+=1}if(z<Q.length)Q.length=z;if(z<q.length)q.length=z;Element.prototype.replaceChildren.apply(v.tagsSuggested,v.fragment.children)}if(Q.length>0)v.tagsSuggested.setAttribute("data-show","1");else v.tagsSuggested.setAttribute("data-show","0")}else if(I.input.length<y.length&&Q.length>0){const U=v.root;let q=0;for(let z=0;z<Q.length;z+=1){let G=Q[z],J=U[`tagsu_${G}`];if(G.startsWith(y))J.setAttribute("data-display","1"),Q[q]=G,q+=1;else J.setAttribute("data-display","0")}if(q<Q.length)Q.length=q;if(Q.length>0)v.tagsSuggested.setAttribute("data-show","1");else v.tagsSuggested.setAttribute("data-show","0")}else if(I.tempSuggested.length>0&&y.length<I.input.length){const U=v.tagsSuggested.children,q=I.tempSuggested;let z=0;for(let G=0;G<q.length;G+=1){let J=q[G],K=U[G];if(J.startsWith(y))K.setAttribute("data-display","1"),Q[z]=J,z+=1;else K.setAttribute("data-display","0")}if(z<Q.length)Q.length=z;if(Q.length>0)v.tagsSuggested.setAttribute("data-show","1");else v.tagsSuggested.setAttribute("data-show","0")}}};{let Q=function(z){switch(z.key){case" ":z.preventDefault();break;case"Enter":n.addInputTag(),z.preventDefault()}};const y=document.getElementById("modal_todo-button-close");y.onclick=n.closeTodoModal;const U=v.tagsInput;U.oninput=function z(G){let J=G.currentTarget.value;n.createSuggested(J),I.input=J},U.onkeydown=Q;const q=v.tagsAdd;q.onclick=n.addInputTag,q.onkeydown=Q}var S=function(){let y=Date.now().toString();for(let Q=0;Q<8;Q+=1){const U=h[Math.floor(Math.random()*h.length)],q=Math.floor(Math.random()*y.length);if(q===y.length)y=String.prototype.concat.call(y,U);else if(q===0)y=String.prototype.concat.call(U,y);else y=String.prototype.concat.call(String.prototype.slice.call(y,0,q),U,String.prototype.slice.call(y,q))}return y},l=function(y){const U=y.currentTarget.getAttribute("data-id");if(U===null){console.warn("WARNNING: data-id does not exist in this button.","We can not toggle the completition of the todo.");return}B.toggleCompleted(U)},i=function(y){const Q=y.currentTarget.getAttribute("data-id");if(Q===null){console.warn("WARNNING: data-id does not exist in this button.","We can not remove the todo.");return}B.remove(Q)},M=function(y){if(v.text.value.length===0)return;const Q=F.editId;B.edit(Q,v.changeDate.value==="1",v.text.value,v.color.value,I.selected),n.closeTodoModal()},g=function(y){const Q=y.currentTarget.getAttribute("data-id");if(Q===null)return;F.editId=Q;const U=E.todos[Q];n.initTagsEdit(U.tags),v.title.textContent=F.EDIT_TITLE,v.sectionDate.setAttribute("data-display","1"),v.changeDate.value="0",v.text.value=U.text,v.color.value=U.color,v.buttonComplete.textContent="edit",v.buttonComplete.onclick=M,n.openTodoModal()},s=function(y,Q,U,q,z="default",G=!1){const K=D.content.cloneNode(!0).firstElementChild;if(K.id=y,K.setAttribute("data-color",z),G)K.setAttribute("data-completed","1");const{firstElementChild:P,lastElementChild:V}=K,X=P.children[0],Y=P.children[1],Z=P.children[2],$=X.children[0],f=X.children[1],N=X.children[2];if($.textContent=p.format(U),f.setAttribute("data-id",y),N.setAttribute("data-id",y),f.onclick=g,N.onclick=i,Y.firstElementChild.textContent=Q,K.header=X,K.main=Y,K.footer=Z,q.length>0){Z.setAttribute("data-display","1");for(let W=0;W<q.length;W+=1){const b=C.createDOMTodoTag(q[W]);Z.appendChild(b)}}const k=V.firstElementChild;return k.setAttribute("data-id",y),k.onclick=l,K.buttonToggle=k,K},T=function(y,Q,U){const q=S(),z=Date.now(),G={color:Q,completed:!1,date:z,id:q,tags:Array.from(U),text:y},J=s(q,y,z,U,Q);B.add(q,G,J)},D=document.getElementById("template_todo"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_";{let y=function(){document.getElementById("modal_init")?.remove()},Q=function(){localStorage.setItem("show-init","false"),document.getElementById("modal_init")?.remove()};d=y,e=Q;const U=localStorage.getItem("show-init");if(U!=="false"){const q=document.getElementById("modal_init-button-close"),z=document.getElementById("modal_init-button-complete");if(q!==null&&z!==null)q.onclick=y,z.onclick=Q;if(U===void 0)localStorage.setItem("show-init","true")}else document.getElementById("modal_init")?.remove()}var d,e;var t={input:"",charSuggested:"",suggested:[],tempSuggested:[]},yy="general_filter",o={root:document.getElementById(yy),buttonComplete:document.getElementById(yy).button_complete,buttonClear:document.getElementById(yy).button_clear,status:document.getElementById(yy).status,color:document.getElementById(yy).color,tagsInput:document.getElementById(yy).tags_input,tagsSuggested:document.getElementById(yy).tags_suggested,noTagsSuggeted:document.getElementById(yy).no_tags_suggested,sectionSelected:document.getElementById("general_filter-section-selected"),tagsSelected:document.getElementById(yy).tags_selected,fragment:document.createDocumentFragment()},Qy={openModal(){const y=document.getElementById("modal_filter");if(y===null){console.warn("WARN: modal.filter does not exist");return}y.setAttribute("data-display","1"),document.body.style.overflow="hidden"},closeModal(){const y=document.getElementById("modal_filter");if(y===null){console.warn("WARN: modal.filter does not exist");return}y.setAttribute("data-display","0"),document.body.style.overflow=""},onMatchMedia(y){const Q=o.root,U=document.getElementById("modal_filter");if(y.matches){if(U.getAttribute("data-display")==="1")U.setAttribute("data-display","0"),document.body.style.overflow="";document.getElementById("aside_filter").appendChild(Q)}else U.firstElementChild?.appendChild(Q)},changeStatus(y){w.changeStatus(y.currentTarget.value)},changeColor(y){const Q=y.currentTarget;w.changeColor(Q.value,Q.checked)},createDOMTagSelected(y){const Q=C.createDOMButtonTag(y,`tagse_${y}`);return Q.onclick=Qy.removeTag,Q},createDOMTagSuggested(y){const Q=C.createDOMButtonTag(y,`tagsu_${y}`);return Q.onpointerdown=Qy.addTag,Q},addTag(y){const Q=y.currentTarget.getAttribute("data-value");if(w.addTag(Q)){const q=Qy.createDOMTagSelected(Q);o.tagsSelected.appendChild(q),o.sectionSelected?.setAttribute("data-display","1")}t.input="",o.tagsInput.value="",o.tagsSuggested.setAttribute("data-show","0")},removeTag(y){const Q=y.currentTarget.getAttribute("data-value");if(Q===null)return;if(y.currentTarget.remove(),w.removeTag(Q),R.tags.length===0)o.sectionSelected?.setAttribute("data-display","0")},createSuggested(y){const Q=t.suggested;if(y.length===0){o.tagsSuggested.setAttribute("data-show","0"),o.noTagsSuggeted.setAttribute("data-show","0");return}else if(y.length===1){const U=o.tagsSuggested.children,q=t.tempSuggested;if(y===t.charSuggested)for(let z=0;z<q.length;z+=1)Q[z]=q[z],U[z].setAttribute("data-display","1");else{t.charSuggested=y;let z=0,G=Q.length;for(let J in L)if(y===J[0]){let K;if(z<G)K=U[0],C.editDOMButtonTag(K,J,`tagsu_${J}`),K.setAttribute("data-display","1");else K=Qy.createDOMTagSuggested(J);o.fragment.appendChild(K),Q[z]=J,q[z]=J,z+=1}if(z<Q.length)Q.length=z;if(z<q.length)q.length=z;Element.prototype.replaceChildren.apply(o.tagsSuggested,o.fragment.children)}}else if(t.input.length<y.length&&Q.length>0){const U=o.root;let q=0;for(let z=0;z<Q.length;z+=1){let G=Q[z],J=U[`tagsu_${G}`];if(G.startsWith(y))J.setAttribute("data-display","1"),Q[q]=G,q+=1;else J.setAttribute("data-display","0")}if(q<Q.length)Q.length=q}else if(t.tempSuggested.length>0&&y.length<t.input.length){const U=o.tagsSuggested.children,q=t.tempSuggested;let z=0;for(let G=0;G<q.length;G+=1){let J=q[G],K=U[G];if(J.startsWith(y))K.setAttribute("data-display","1"),Q[z]=J,z+=1;else K.setAttribute("data-display","0")}if(z<Q.length)Q.length=z}if(Q.length>0)o.tagsSuggested.setAttribute("data-show","1"),o.noTagsSuggeted.setAttribute("data-show","0");else o.tagsSuggested.setAttribute("data-show","0"),o.noTagsSuggeted.setAttribute("data-show","1")}};{o.buttonComplete.onclick=w.completeAll,o.buttonClear.onclick=w.clearCompleted;const y=o.status;for(let q=0;q<y.length;q+=1){const z=y[q];z.onclick=Qy.changeStatus}const Q=o.color;for(let q=0;q<Q.length;q+=1){const z=Q[q];z.onclick=Qy.changeColor}const U=o.tagsInput;U.oninput=function q(z){const G=z.currentTarget.value;Qy.createSuggested(G),t.input=G},U.onkeydown=function q(z){if(z.key==="Enter"||z.key===" ")z.preventDefault()}}if(x.addEventListener("change",Qy.onMatchMedia),x.matches)Qy.onMatchMedia(x);{const y=document.getElementById("header_button-filter");y.onclick=Qy.openModal;const Q=document.getElementById("modal_filter-button-close");Q.onclick=Qy.closeModal}{let y=function(U){const q=U.currentTarget,z=q.getAttribute("data-value")==="dark"?"light":"dark";q.setAttribute("data-value",z),localStorage.setItem("theme",z),document.body.className=z};const Q=document.getElementById("header_button-theme");if(Q!==null){Q.onclick=y;let U="light";const q=localStorage.getItem("theme");if(q!==null)U=q;else{if(window.matchMedia!==void 0&&window.matchMedia("(prefers-color-scheme: dark)").matches)U="dark";else U="light";localStorage.setItem("theme",U)}Q.setAttribute("data-value",U),document.body.className=U}}var Jy=function(){if(v.text.value.length===0)return;T(v.text.value,v.color.value,I.selected),n.closeTodoModal()},Ky=function(){v.title.textContent=F.CREATE_TITLE,v.text.value="",v.color.value="default",v.sectionDate.setAttribute("data-display","0"),v.sectionSelected.setAttribute("data-display","0"),v.tagsSuggested.setAttribute("data-show","0"),v.buttonComplete.textContent="create",v.buttonComplete.onclick=Jy,n.resetTagsSelected(),n.openTodoModal()};{const y=document.getElementById("header_button-add");if(y===null)throw Error("header_button-add is null");else y.addEventListener("click",Ky)}{const y=localStorage.getItem("todo.ids");if(y!==null){if(y.length>2)try{E.ids=JSON.parse(localStorage["todo.ids"])}catch{const Q=localStorage.getItem("theme");if(localStorage.clear(),localStorage.setItem("todo.ids","[]"),Q!==null)localStorage.setItem("theme",Q)}}else localStorage.setItem("todo.ids","[]")}{let y=-1;const Q=E.ids.length;let U="";for(let q=0;q<Q;q+=1){U=E.ids[q];const z=localStorage.getItem(`todo.${U}`);if(z!==null){let G;try{G=JSON.parse(z)}catch{if(localStorage.removeItem(`todo.${U}`),y===-1)y=q;continue}E.todos[U]=G;const J=s(U,G.text,G.date,G.tags,G.color,G.complete);if(J.setAttribute("data-display","1"),G.completed)B.setDOMTodoComplete(J,!0);if(A.todos[U]=J,A.fragment.appendChild(J),E.selected.push(U),y!==-1)E.ids[y]=E.ids[q],y+=1}else if(y===-1)y=q}if(Element.prototype.append.apply(A.root,A.fragment.children),y!==-1)E.ids.length=y}{let y="";for(let Q=0;Q<E.ids.length;Q+=1){y=E.ids[Q];const U=E.todos[y];C.add(U.tags)}}if(navigator.serviceWorker!==void 0)navigator.serviceWorker.register("serviceworker.js");
